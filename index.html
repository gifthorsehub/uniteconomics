<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GiftHorse - Unit Economics Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                    colors: {
                        stripe: {
                            bg: '#f7fafc',
                            card: '#ffffff',
                            border: '#e2e8f0',
                            primary: '#635bff',
                            secondary: '#0a2540',
                        },
                        positive: '#00d4aa',
                        negative: '#ff5c5c',
                        chart: {
                            blue: '#635bff',
                            green: '#00d4aa',
                            red: '#ff5c5c',
                            orange: '#ff9f43',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        * {
            font-family: 'Inter', system-ui, sans-serif;
        }
        
        body {
            background-color: #f7fafc;
        }
        
        .card {
            animation: slideUp 0.5s ease-out forwards;
            opacity: 0;
            transform: translateY(20px);
        }
        
        .card:nth-child(1) { animation-delay: 0.05s; }
        .card:nth-child(2) { animation-delay: 0.1s; }
        .card:nth-child(3) { animation-delay: 0.15s; }
        .card:nth-child(4) { animation-delay: 0.2s; }
        
        .chart-card {
            animation: slideUp 0.5s ease-out forwards;
            opacity: 0;
            transform: translateY(20px);
        }
        
        .chart-card:nth-child(1) { animation-delay: 0.25s; }
        .chart-card:nth-child(2) { animation-delay: 0.3s; }
        .chart-card:nth-child(3) { animation-delay: 0.35s; }
        .chart-card:nth-child(4) { animation-delay: 0.4s; }
        
        @keyframes slideUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #635bff 0%, #a855f7 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .glow-card {
            position: relative;
            overflow: hidden;
        }
        
        .glow-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #635bff, #00d4aa, #635bff);
            background-size: 200% 100%;
            animation: shimmer 2s linear infinite;
        }
        
        @keyframes shimmer {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        .badge-pulse {
            animation: pulse 2s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(0, 212, 170, 0.4); }
            50% { box-shadow: 0 0 0 8px rgba(0, 212, 170, 0); }
        }
    </style>
</head>
<body class="min-h-screen">
    <!-- Header -->
    <header class="bg-white border-b border-stripe-border sticky top-0 z-50 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-stripe-primary to-purple-500 flex items-center justify-center shadow-lg">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"></path>
                        </svg>
                    </div>
                    <div>
                        <span class="text-2xl font-bold gradient-text">GiftHorse</span>
                        <p class="text-xs text-gray-500 -mt-1">Unit Economics Dashboard</p>
                    </div>
                </div>
                <div class="flex items-center gap-3">
                    <span class="badge-pulse inline-flex items-center gap-2 px-4 py-2 rounded-full bg-positive/10 text-positive font-semibold text-sm border border-positive/20">
                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                        </svg>
                        Breakeven reached in Q1 2027 ðŸš€
                    </span>
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- KPI Cards -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-5 mb-8">
            <!-- LTV/CAC Card -->
            <div class="card glow-card bg-white rounded-2xl p-6 shadow-sm border border-stripe-border hover:shadow-lg transition-all duration-300">
                <div class="flex items-start justify-between mb-4">
                    <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-stripe-primary/10 to-purple-500/10 flex items-center justify-center">
                        <svg class="w-6 h-6 text-stripe-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                        </svg>
                    </div>
                    <span class="px-2.5 py-1 rounded-full text-xs font-semibold bg-positive/10 text-positive">Outstanding</span>
                </div>
                <p class="text-sm font-medium text-gray-500 mb-1">LTV / CAC Ratio</p>
                <p class="text-4xl font-bold text-stripe-secondary">22x</p>
                <p class="text-xs text-gray-400 mt-2 flex items-center gap-1">
                    <svg class="w-3 h-3 text-positive" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12 7a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0V8.414l-4.293 4.293a1 1 0 01-1.414 0L8 10.414l-4.293 4.293a1 1 0 01-1.414-1.414l5-5a1 1 0 011.414 0L11 10.586 14.586 7H12z" clip-rule="evenodd"></path>
                    </svg>
                    11x above healthy benchmark (3x)
                </p>
            </div>

            <!-- Payback Card -->
            <div class="card bg-white rounded-2xl p-6 shadow-sm border border-stripe-border hover:shadow-lg transition-all duration-300">
                <div class="flex items-start justify-between mb-4">
                    <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-positive/10 to-emerald-500/10 flex items-center justify-center">
                        <svg class="w-6 h-6 text-positive" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    </div>
                    <span class="px-2.5 py-1 rounded-full text-xs font-semibold bg-positive/10 text-positive">Fast</span>
                </div>
                <p class="text-sm font-medium text-gray-500 mb-1">Payback Period</p>
                <p class="text-4xl font-bold text-stripe-secondary">0.9 <span class="text-xl font-medium text-gray-400">mo</span></p>
                <p class="text-xs text-gray-400 mt-2">CAC recovered in under 1 month</p>
            </div>

            <!-- Breakeven Card -->
            <div class="card bg-white rounded-2xl p-6 shadow-sm border border-stripe-border hover:shadow-lg transition-all duration-300">
                <div class="flex items-start justify-between mb-4">
                    <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-chart-orange/10 to-amber-500/10 flex items-center justify-center">
                        <svg class="w-6 h-6 text-chart-orange" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    </div>
                    <span class="px-2.5 py-1 rounded-full text-xs font-semibold bg-chart-orange/10 text-chart-orange">Target Reached</span>
                </div>
                <p class="text-sm font-medium text-gray-500 mb-1">Breakeven Point</p>
                <p class="text-4xl font-bold text-stripe-secondary">Month <span class="text-positive">13</span></p>
                <p class="text-xs text-gray-400 mt-2">Q1 2027 â€¢ Profitable operations</p>
            </div>

            <!-- 2-Year Revenue Card -->
            <div class="card bg-gradient-to-br from-stripe-primary to-purple-600 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 text-white">
                <div class="flex items-start justify-between mb-4">
                    <div class="w-12 h-12 rounded-xl bg-white/20 flex items-center justify-center">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    </div>
                    <span class="px-2.5 py-1 rounded-full text-xs font-semibold bg-white/20 text-white">Forecast</span>
                </div>
                <p class="text-sm font-medium text-white/70 mb-1">2-Year Revenue</p>
                <p class="text-4xl font-bold">$29.8M</p>
                <p class="text-xs text-white/60 mt-2 flex items-center gap-1">
                    <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12 7a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0V8.414l-4.293 4.293a1 1 0 01-1.414 0L8 10.414l-4.293 4.293a1 1 0 01-1.414-1.414l5-5a1 1 0 011.414 0L11 10.586 14.586 7H12z" clip-rule="evenodd"></path>
                    </svg>
                    98x growth from Q1 2026
                </p>
            </div>
        </div>

        <!-- Charts Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-5">
            <!-- Path to Profitability -->
            <div class="chart-card bg-white rounded-2xl p-6 shadow-sm border border-stripe-border">
                <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-6">
                    <div>
                        <h3 class="text-lg font-semibold text-stripe-secondary">Path to Profitability</h3>
                        <p class="text-sm text-gray-500">Revenue & Net Profit over 8 quarters</p>
                    </div>
                    <div class="flex items-center gap-4 text-xs">
                        <span class="flex items-center gap-1.5">
                            <span class="w-3 h-3 rounded-full bg-stripe-primary"></span>
                            Revenue
                        </span>
                        <span class="flex items-center gap-1.5">
                            <span class="w-3 h-3 rounded-full bg-gradient-to-r from-negative to-positive"></span>
                            Net Profit
                        </span>
                    </div>
                </div>
                <div class="h-72 sm:h-80">
                    <canvas id="profitabilityChart"></canvas>
                </div>
            </div>

            <!-- Unit Economics Evolution -->
            <div class="chart-card bg-white rounded-2xl p-6 shadow-sm border border-stripe-border">
                <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-6">
                    <div>
                        <h3 class="text-lg font-semibold text-stripe-secondary">Unit Economics Evolution</h3>
                        <p class="text-sm text-gray-500">CAC decreasing, LTV growing</p>
                    </div>
                    <div class="flex items-center gap-4 text-xs">
                        <span class="flex items-center gap-1.5">
                            <span class="w-3 h-3 rounded bg-negative/80"></span>
                            CAC
                        </span>
                        <span class="flex items-center gap-1.5">
                            <span class="w-3 h-3 rounded-full bg-positive"></span>
                            LTV
                        </span>
                    </div>
                </div>
                <div class="h-72 sm:h-80">
                    <canvas id="unitEconomicsChart"></canvas>
                </div>
            </div>

            <!-- Retention Curve -->
            <div class="chart-card bg-white rounded-2xl p-6 shadow-sm border border-stripe-border">
                <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-6">
                    <div>
                        <h3 class="text-lg font-semibold text-stripe-secondary">Retention Curve</h3>
                        <p class="text-sm text-gray-500">24-month cohort retention behavior</p>
                    </div>
                    <div class="px-2.5 py-1 rounded-full text-xs font-medium bg-positive/10 text-positive">
                        35% long-term plateau
                    </div>
                </div>
                <div class="h-72 sm:h-80">
                    <canvas id="retentionChart"></canvas>
                </div>
            </div>

            <!-- User Growth -->
            <div class="chart-card bg-white rounded-2xl p-6 shadow-sm border border-stripe-border">
                <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-6">
                    <div>
                        <h3 class="text-lg font-semibold text-stripe-secondary">User Growth 24 Months</h3>
                        <p class="text-sm text-gray-500">Cumulative active user base</p>
                    </div>
                    <div class="px-2.5 py-1 rounded-full text-xs font-medium bg-stripe-primary/10 text-stripe-primary">
                        360K users by M24
                    </div>
                </div>
                <div class="h-72 sm:h-80">
                    <canvas id="userGrowthChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="mt-10 text-center text-sm text-gray-400 pb-8">
            <p>GiftHorse Unit Economics Dashboard &copy; 2026-2027</p>
            <p class="mt-1">Projection period: Q1 2026 - Q4 2027 (24 months)</p>
        </footer>
    </main>

    <script>
        // Dashboard Data
        const dashboardData = {
            quarterly: {
                labels: ['Q1 2026', 'Q2 2026', 'Q3 2026', 'Q4 2026', 'Q1 2027', 'Q2 2027', 'Q3 2027', 'Q4 2027'],
                revenue: [83942, 893772, 1820393, 2896740, 4036715, 5203088, 6578187, 8306227],
                netProfit: [-372472, -321664, -246016, -83860, 102992, 242387, 397475, 583441],
                cac: [10.8, 4.3, 4.3, 4.3, 4.0, 3.8, 3.5, 3.2],
                ltv: [101, 110, 111, 115, 120, 128, 135, 142]
            },
            monthly: {
                labels: Array.from({length: 24}, (_, i) => `M${i+1}`),
                retention: [100, 65, 58, 54, 51, 49, 47, 46, 45, 44, 43, 42, 41, 40, 39, 39, 38, 38, 37, 37, 36, 36, 35, 35],
                churn: [0, 35, 42, 46, 49, 51, 53, 54, 55, 56, 57, 58, 59, 60, 61, 61, 62, 62, 63, 63, 64, 64, 65, 65],
                users: [2566, 4838, 8858, 20526, 32287, 44142, 56091, 68137, 80750, 92993, 105334, 117773, 130000, 145000, 160000, 175000, 190000, 210000, 230000, 250000, 275000, 300000, 330000, 360000]
            }
        };

        // Chart.js Global Config
        Chart.defaults.font.family = "'Inter', system-ui, sans-serif";
        Chart.defaults.color = '#64748b';
        Chart.defaults.plugins.legend.display = false;
        Chart.defaults.plugins.tooltip.backgroundColor = '#0a2540';
        Chart.defaults.plugins.tooltip.titleColor = '#fff';
        Chart.defaults.plugins.tooltip.bodyColor = '#fff';
        Chart.defaults.plugins.tooltip.padding = 12;
        Chart.defaults.plugins.tooltip.cornerRadius = 8;
        Chart.defaults.plugins.tooltip.displayColors = false;

        // Utility Functions
        const formatCurrency = (value) => {
            const absValue = Math.abs(value);
            if (absValue >= 1000000) {
                return (value < 0 ? '-' : '') + '$' + (absValue / 1000000).toFixed(2) + 'M';
            } else if (absValue >= 1000) {
                return (value < 0 ? '-' : '') + '$' + (absValue / 1000).toFixed(0) + 'K';
            }
            return '$' + value.toFixed(0);
        };

        const formatNumber = (value) => {
            if (value >= 1000000) return (value / 1000000).toFixed(1) + 'M';
            if (value >= 1000) return (value / 1000).toFixed(0) + 'K';
            return value.toString();
        };

        // 1. Path to Profitability Chart
        const profitCtx = document.getElementById('profitabilityChart').getContext('2d');
        
        // Create gradient for revenue
        const revenueGradient = profitCtx.createLinearGradient(0, 0, 0, 320);
        revenueGradient.addColorStop(0, 'rgba(99, 91, 255, 0.3)');
        revenueGradient.addColorStop(1, 'rgba(99, 91, 255, 0.02)');

        // Create segmented colors for profit line (red when negative, green when positive)
        const profitColors = dashboardData.quarterly.netProfit.map(v => v >= 0 ? '#00d4aa' : '#ff5c5c');
        const profitBorderColors = [];
        for (let i = 0; i < dashboardData.quarterly.netProfit.length; i++) {
            profitBorderColors.push(dashboardData.quarterly.netProfit[i] >= 0 ? '#00d4aa' : '#ff5c5c');
        }

        new Chart(profitCtx, {
            type: 'line',
            data: {
                labels: dashboardData.quarterly.labels,
                datasets: [
                    {
                        label: 'Revenue',
                        data: dashboardData.quarterly.revenue,
                        borderColor: '#635bff',
                        backgroundColor: revenueGradient,
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointRadius: 5,
                        pointBackgroundColor: '#635bff',
                        pointBorderColor: '#fff',
                        pointBorderWidth: 2,
                        pointHoverRadius: 7
                    },
                    {
                        label: 'Net Profit',
                        data: dashboardData.quarterly.netProfit,
                        borderColor: function(context) {
                            const chart = context.chart;
                            const {ctx, chartArea} = chart;
                            if (!chartArea) return '#ff5c5c';
                            
                            const gradient = ctx.createLinearGradient(chartArea.left, 0, chartArea.right, 0);
                            gradient.addColorStop(0, '#ff5c5c');
                            gradient.addColorStop(0.5, '#ff5c5c');
                            gradient.addColorStop(0.5, '#00d4aa');
                            gradient.addColorStop(1, '#00d4aa');
                            return gradient;
                        },
                        backgroundColor: 'transparent',
                        borderWidth: 3,
                        fill: false,
                        tension: 0.4,
                        pointRadius: 5,
                        pointBackgroundColor: profitColors,
                        pointBorderColor: '#fff',
                        pointBorderWidth: 2,
                        pointHoverRadius: 7,
                        segment: {
                            borderColor: ctx => {
                                const prev = ctx.p0.parsed.y;
                                const curr = ctx.p1.parsed.y;
                                if (prev < 0 && curr < 0) return '#ff5c5c';
                                if (prev >= 0 && curr >= 0) return '#00d4aa';
                                return '#f59e0b'; // transition color
                            }
                        }
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                interaction: { intersect: false, mode: 'index' },
                plugins: {
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.dataset.label + ': ' + formatCurrency(context.parsed.y);
                            }
                        }
                    },
                    annotation: {
                        annotations: {
                            breakeven: {
                                type: 'line',
                                xMin: 4,
                                xMax: 4,
                                borderColor: '#00d4aa',
                                borderWidth: 2,
                                borderDash: [6, 4],
                                label: {
                                    display: true,
                                    content: 'Breakeven',
                                    position: 'start',
                                    backgroundColor: '#00d4aa',
                                    color: '#fff',
                                    font: { size: 11, weight: '600' },
                                    padding: { x: 8, y: 4 },
                                    borderRadius: 4
                                }
                            },
                            zeroLine: {
                                type: 'line',
                                yMin: 0,
                                yMax: 0,
                                borderColor: '#e2e8f0',
                                borderWidth: 1,
                                borderDash: [4, 4]
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        grid: { display: false },
                        ticks: { font: { weight: '500', size: 11 } }
                    },
                    y: {
                        grid: { color: 'rgba(0, 0, 0, 0.04)' },
                        ticks: {
                            callback: value => formatCurrency(value),
                            font: { size: 11 }
                        }
                    }
                },
                animation: { duration: 1500, easing: 'easeOutQuart' }
            }
        });

        // 2. Unit Economics Evolution (Combo Chart)
        const unitEconCtx = document.getElementById('unitEconomicsChart').getContext('2d');
        
        new Chart(unitEconCtx, {
            type: 'bar',
            data: {
                labels: dashboardData.quarterly.labels,
                datasets: [
                    {
                        type: 'bar',
                        label: 'CAC',
                        data: dashboardData.quarterly.cac,
                        backgroundColor: 'rgba(255, 92, 92, 0.8)',
                        borderRadius: 6,
                        barPercentage: 0.5,
                        categoryPercentage: 0.6,
                        yAxisID: 'y'
                    },
                    {
                        type: 'line',
                        label: 'LTV',
                        data: dashboardData.quarterly.ltv,
                        borderColor: '#00d4aa',
                        backgroundColor: 'transparent',
                        borderWidth: 3,
                        tension: 0.4,
                        pointRadius: 6,
                        pointBackgroundColor: '#00d4aa',
                        pointBorderColor: '#fff',
                        pointBorderWidth: 3,
                        pointHoverRadius: 8,
                        yAxisID: 'y1'
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                interaction: { intersect: false, mode: 'index' },
                plugins: {
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.dataset.label + ': $' + context.parsed.y.toFixed(2);
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        grid: { display: false },
                        ticks: { font: { weight: '500', size: 11 } }
                    },
                    y: {
                        type: 'linear',
                        position: 'left',
                        title: { display: true, text: 'CAC ($)', font: { size: 11 } },
                        grid: { color: 'rgba(0, 0, 0, 0.04)' },
                        min: 0,
                        max: 15,
                        ticks: {
                            callback: value => '$' + value,
                            font: { size: 11 }
                        }
                    },
                    y1: {
                        type: 'linear',
                        position: 'right',
                        title: { display: true, text: 'LTV ($)', font: { size: 11 } },
                        grid: { display: false },
                        min: 80,
                        max: 160,
                        ticks: {
                            callback: value => '$' + value,
                            font: { size: 11 }
                        }
                    }
                },
                animation: { duration: 1500, easing: 'easeOutQuart' }
            },
            plugins: [{
                afterDatasetsDraw: function(chart) {
                    const ctx = chart.ctx;
                    chart.data.datasets.forEach((dataset, i) => {
                        const meta = chart.getDatasetMeta(i);
                        if (dataset.type === 'line' || (!dataset.type && i === 1)) {
                            meta.data.forEach((element, index) => {
                                const value = dataset.data[index];
                                ctx.fillStyle = '#0a2540';
                                ctx.font = 'bold 10px Inter';
                                ctx.textAlign = 'center';
                                ctx.fillText('$' + value, element.x, element.y - 12);
                            });
                        }
                    });
                }
            }]
        });

        // 3. Retention Curve
        const retentionCtx = document.getElementById('retentionChart').getContext('2d');
        
        const retentionGradient = retentionCtx.createLinearGradient(0, 0, 0, 320);
        retentionGradient.addColorStop(0, 'rgba(0, 212, 170, 0.25)');
        retentionGradient.addColorStop(1, 'rgba(0, 212, 170, 0.02)');

        new Chart(retentionCtx, {
            type: 'line',
            data: {
                labels: dashboardData.monthly.labels,
                datasets: [{
                    label: 'Retention',
                    data: dashboardData.monthly.retention,
                    borderColor: '#00d4aa',
                    backgroundColor: retentionGradient,
                    borderWidth: 3,
                    fill: true,
                    tension: 0.4,
                    cubicInterpolationMode: 'monotone',
                    pointRadius: 0,
                    pointHoverRadius: 6,
                    pointHoverBackgroundColor: '#00d4aa',
                    pointHoverBorderColor: '#fff',
                    pointHoverBorderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                interaction: { intersect: false, mode: 'index' },
                plugins: {
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return 'Retention: ' + context.parsed.y + '%';
                            }
                        }
                    },
                    annotation: {
                        annotations: {
                            plateau: {
                                type: 'line',
                                yMin: 35,
                                yMax: 35,
                                borderColor: 'rgba(0, 212, 170, 0.5)',
                                borderWidth: 1,
                                borderDash: [6, 4],
                                label: {
                                    display: true,
                                    content: '35% plateau',
                                    position: 'end',
                                    backgroundColor: 'rgba(0, 212, 170, 0.1)',
                                    color: '#00d4aa',
                                    font: { size: 10, weight: '500' },
                                    padding: { x: 6, y: 3 },
                                    borderRadius: 4
                                }
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        grid: { display: false },
                        ticks: {
                            font: { size: 10 },
                            maxTicksLimit: 12
                        }
                    },
                    y: {
                        grid: { color: 'rgba(0, 0, 0, 0.04)' },
                        min: 0,
                        max: 100,
                        ticks: {
                            callback: value => value + '%',
                            font: { size: 11 },
                            stepSize: 20
                        }
                    }
                },
                animation: { duration: 2000, easing: 'easeOutQuart' }
            }
        });

        // 4. User Growth Chart
        const userGrowthCtx = document.getElementById('userGrowthChart').getContext('2d');
        
        const userGradient = userGrowthCtx.createLinearGradient(0, 0, 0, 320);
        userGradient.addColorStop(0, 'rgba(99, 91, 255, 0.4)');
        userGradient.addColorStop(0.5, 'rgba(99, 91, 255, 0.15)');
        userGradient.addColorStop(1, 'rgba(99, 91, 255, 0.02)');

        new Chart(userGrowthCtx, {
            type: 'line',
            data: {
                labels: dashboardData.monthly.labels,
                datasets: [{
                    label: 'Users',
                    data: dashboardData.monthly.users,
                    borderColor: '#635bff',
                    backgroundColor: userGradient,
                    borderWidth: 3,
                    fill: true,
                    tension: 0.4,
                    pointRadius: 0,
                    pointHoverRadius: 6,
                    pointHoverBackgroundColor: '#635bff',
                    pointHoverBorderColor: '#fff',
                    pointHoverBorderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                interaction: { intersect: false, mode: 'index' },
                plugins: {
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return formatNumber(context.parsed.y) + ' users';
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        grid: { display: false },
                        ticks: {
                            font: { size: 10 },
                            maxTicksLimit: 12
                        }
                    },
                    y: {
                        grid: { color: 'rgba(0, 0, 0, 0.04)' },
                        ticks: {
                            callback: value => formatNumber(value),
                            font: { size: 11 }
                        }
                    }
                },
                animation: { duration: 2000, easing: 'easeOutQuart' }
            }
        });
    </script>
</body>
</html>
