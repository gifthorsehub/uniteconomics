<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GiftHorse Marketing Funnels Dashboard</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; min-height: 100vh; }
.container { max-width: 1400px; margin: 0 auto; background: white; border-radius: 12px; box-shadow: 0 10px 40px rgba(0,0,0,0.2); overflow: hidden; }

/* HEADER */
.header { background: linear-gradient(135deg, #0066CC 0%, #004C99 100%); color: white; padding: 30px; text-align: center; }
.header h1 { font-size: 2rem; margin-bottom: 10px; }
.header p { opacity: 0.9; font-size: 1rem; }

/* FILTERS */
.filters { background: #f8f9fa; padding: 20px 30px; border-bottom: 2px solid #e9ecef; display: flex; gap: 20px; flex-wrap: wrap; align-items: center; }
.filter-group { display: flex; flex-direction: column; gap: 5px; }
.filter-group label { font-size: 0.85rem; font-weight: 600; color: #495057; }
.filter-group select { padding: 8px 12px; border: 1px solid #ced4da; border-radius: 6px; font-size: 0.9rem; cursor: pointer; transition: all 0.3s; }
.filter-group select:hover { border-color: #0066CC; }

/* TABLE */
.table-container { padding: 30px; overflow-x: auto; padding-bottom: 100px; }
table { width: 100%; border-collapse: separate; border-spacing: 0; font-size: 0.85rem; }

thead th { background: #4472C4; color: white; padding: 15px 10px; text-align: left; font-weight: 600; position: sticky; top: 0; z-index: 10; border-bottom: 2px solid #fff; }
tbody td { padding: 15px 10px; border-bottom: 1px solid #e9ecef; vertical-align: top; }

/* ROW STYLES & HOVER FIXES */
tbody tr { transition: all 0.2s; }

.channel-donations { background: #D9E1F2; }
.channel-amazon { background: #FCE4D6; }
.channel-affiliates { background: #E2EFDA; }
.channel-partners { background: #FFF2CC; }
.channel-subs { background: #F4B084; color: white; }

tbody tr:hover { background: #f8f9fa !important; transform: scale(1.01); box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
tbody tr.channel-subs:hover { color: #333333 !important; }
tbody tr.channel-subs:hover td.channel-cell { color: #333333 !important; }

.channel-cell { font-weight: 700; font-size: 0.95rem; }

/* METRICS */
.metric-box { display: inline-block; padding: 4px 10px; border-radius: 4px; font-weight: 600; }
.cac-low { background: #d4edda; color: #155724; }
.cac-medium { background: #fff3cd; color: #856404; }
.cac-high { background: #f8d7da; color: #721c24; }
.romi-excellent { background: #28a745; color: white; }
.romi-good { background: #ffc107; color: #333; }
.romi-ok { background: #6c757d; color: white; }
.romi-negative { background: #dc3545; color: white; }
.stat-card { text-align: center; }
.stat-number { font-size: 1.2rem; font-weight: 700; color: #0066CC; }

/* TOOLTIPS CSS (FIXED) */
.term-with-tooltip {
    border-bottom: 1px dashed #666;
    cursor: help;
    position: relative;
    display: inline-block;
}
.channel-subs .term-with-tooltip { border-bottom-color: rgba(255,255,255,0.8); }
tbody tr.channel-subs:hover .term-with-tooltip { border-bottom-color: #666; }

.tooltip-content {
    visibility: hidden;
    width: 280px;
    background-color: #333;
    color: #fff;
    text-align: left;
    border-radius: 6px;
    padding: 12px;
    position: absolute;
    z-index: 100;
    top: 125%;  /* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –í–ù–ò–ó–£ */
    left: 50%;
    margin-left: -140px;
    opacity: 0;
    transition: opacity 0.3s;
    font-weight: normal;
    font-size: 0.8rem;
    line-height: 1.5;
    box-shadow: 0 4px 15px rgba(0,0,0,0.3);
}

.tooltip-content::after {
    content: "";
    position: absolute;
    bottom: 100%; /* –°—Ç—Ä–µ–ª–∫–∞ –°–í–ï–†–•–£ */
    left: 50%;
    margin-left: -5px;
    border-width: 5px;
    border-style: solid;
    border-color: transparent transparent #333 transparent; /* –°—Ç—Ä–µ–ª–∫–∞ –í–í–ï–†–• */
}

.term-with-tooltip:hover .tooltip-content {
    visibility: visible;
    opacity: 1;
}

.tooltip-formula {
    background: rgba(255,255,255,0.1);
    padding: 4px 8px;
    border-radius: 4px;
    font-family: monospace;
    display: block;
    margin: 6px 0;
}

/* SUMMARY */
.summary { background: #f8f9fa; padding: 20px 30px; border-top: 2px solid #e9ecef; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; }
.summary-card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
.summary-card h3 { color: #0066CC; margin-bottom: 10px; font-size: 1.1rem; }
.summary-card p { color: #495057; font-size: 0.9rem; line-height: 1.6; }

@media (max-width: 768px) {
    .header h1 { font-size: 1.5rem; }
    .filters { flex-direction: column; }
    table { font-size: 0.75rem; }
    .tooltip-content { width: 220px; margin-left: -110px; }
}
</style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>üéÅ GiftHorse Marketing Funnels (v4.0 - Corrected LTV)</h1>
        <p>LTV –ø–µ—Ä–µ—Å—á–∏—Ç–∞–Ω –Ω–∞ –æ—Å–Ω–æ–≤–µ <strong>—á–∏—Å—Ç–æ–π –º–∞—Ä–∂–∏</strong> –∏–∑ Unit Economics —Ñ–∞–π–ª–∞</p>
    </div>

    <div class="filters">
        <div class="filter-group">
            <label for="channelFilter">–ö–∞–Ω–∞–ª –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏:</label>
            <select id="channelFilter" onchange="filterTable()">
                <option value="all">–í—Å–µ –∫–∞–Ω–∞–ª—ã</option>
                <option value="DONATIONS">Donations</option>
                <option value="AMAZON">Amazon</option>
                <option value="AFFILIATES">Affiliates</option>
                <option value="PARTNERS">Local Partners</option>
                <option value="SUBS">Subscriptions</option>
            </select>
        </div>
        <div class="filter-group">
            <label for="trafficFilter">–ò—Å—Ç–æ—á–Ω–∏–∫ —Ç—Ä–∞—Ñ–∏–∫–∞:</label>
            <select id="trafficFilter" onchange="filterTable()">
                <option value="all">–í—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏</option>
                <option value="organic">Organic / Viral</option>
                <option value="paid">Paid Ads</option>
            </select>
        </div>
    </div>

    <div class="table-container">
        <table id="mainTable">
            <thead>
                <tr>
                    <th>–ö–∞–Ω–∞–ª</th>
                    <th>–ò—Å—Ç–æ—á–Ω–∏–∫ —Ç—Ä–∞—Ñ–∏–∫–∞</th>
                    <th>CAC</th>
                    <th>Conv%</th>
                    <th>–ß–µ–∫</th>
                    <th>–ú–∞—Ä–∂–∞ %</th>
                    <th>LTV 12M</th>
                    <th>ROMI</th>
                    <th>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</th>
                </tr>
            </thead>
            <tbody>
                <!-- DONATIONS -->
                <tr data-channel="DONATIONS" data-traffic="organic" class="channel-donations">
                    <td class="channel-cell">DONATIONS</td>
                    <td>–í–∏—Ä–∞–ª—å–Ω—ã–π / Organic</td>
                    <td><span class="metric-box cac-low">$2</span></td>
                    <td>11-17%</td>
                    <td>$35</td>
                    <td><strong>7.0%</strong><br><small>($2.45)</small></td>
                    <td>
                        <span class="term-with-tooltip"><div class="stat-number">$12.25</div>
                            <span class="tooltip-content"><span class="tooltip-formula">$2.45 (margin) √ó 5 —Å–±–æ—Ä–æ–≤</span>LTV —Å—á–∏—Ç–∞–µ—Ç—Å—è –æ—Ç –ü–†–ò–ë–´–õ–ò, –∞ –Ω–µ –æ—Ç –æ–±–æ—Ä–æ—Ç–∞. –ß–∞—Å—Ç–æ—Ç–∞: 5 —Ä–∞–∑/–≥–æ–¥.</span>
                        </span>
                    </td>
                    <td><span class="metric-box romi-excellent">513%</span></td>
                    <td>–í—ã—Å–æ–∫–∞—è —á–∞—Å—Ç–æ—Ç–∞ –∏ –≤–∏—Ä–∞–ª—å–Ω–æ—Å—Ç—å —Å–ø–∞—Å–∞—é—Ç –º–æ–¥–µ–ª—å</td>
                </tr>
                <tr data-channel="DONATIONS" data-traffic="paid" class="channel-donations">
                    <td class="channel-cell"></td>
                    <td>FB/IG Event Targeting</td>
                    <td><span class="metric-box cac-medium">$12</span></td>
                    <td>8-12%</td>
                    <td>$50</td>
                    <td><strong>7.0%</strong><br><small>($3.50)</small></td>
                    <td>
                        <span class="term-with-tooltip"><div class="stat-number">$14.00</div>
                            <span class="tooltip-content"><span class="tooltip-formula">$3.50 (margin) √ó 4 —Å–±–æ—Ä–∞</span>–û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä—ã –¥–µ–ª–∞—é—Ç –º–µ–Ω—å—à–µ —Å–±–æ—Ä–æ–≤.</span>
                        </span>
                    </td>
                    <td><span class="metric-box romi-ok">17%</span></td>
                    <td>–ù–∞ –≥—Ä–∞–Ω–∏ –æ–∫—É–ø–∞–µ–º–æ—Å—Ç–∏. –¢—Ä–µ–±—É–µ—Ç —Å–Ω–∏–∂–µ–Ω–∏—è CAC.</td>
                </tr>

                <!-- AMAZON -->
                <tr data-channel="AMAZON" data-traffic="organic" class="channel-amazon">
                    <td class="channel-cell">AMAZON</td>
                    <td>SEO / Organic</td>
                    <td><span class="metric-box cac-low">$3</span></td>
                    <td>1.5-2.5%</td>
                    <td>$75</td>
                    <td><strong>2.0%</strong><br><small>($1.50)</small></td>
                    <td>
                        <span class="term-with-tooltip"><div class="stat-number">$1.50</div>
                            <span class="tooltip-content"><span class="tooltip-formula">$1.50 √ó 1 –ø–æ–∫—É–ø–∫–∞</span>–û—á–µ–Ω—å –Ω–∏–∑–∫–∞—è –º–∞—Ä–∂–∞ –∏ —á–∞—Å—Ç–æ—Ç–∞.</span>
                        </span>
                    </td>
                    <td><span class="metric-box romi-negative">-50%</span></td>
                    <td>‚ö†Ô∏è –£–±—ã—Ç–æ—á–Ω—ã–π –∫–∞–Ω–∞–ª –ø—Ä–∏ —Ç–µ–∫—É—â–µ–π –∫–æ–º–∏—Å—Å–∏–∏ 2%</td>
                </tr>
                <tr data-channel="AMAZON" data-traffic="paid" class="channel-amazon">
                    <td class="channel-cell"></td>
                    <td>Google Ads</td>
                    <td><span class="metric-box cac-medium">$6</span></td>
                    <td>2-3%</td>
                    <td>$100</td>
                    <td><strong>2.0%</strong><br><small>($2.00)</small></td>
                    <td>
                        <span class="term-with-tooltip"><div class="stat-number">$2.00</div>
                            <span class="tooltip-content"><span class="tooltip-formula">$2.00 √ó 1 –ø–æ–∫—É–ø–∫–∞</span>–ü–ª–∞—Ç–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫ –Ω–µ –æ–∫—É–ø–∞–µ—Ç—Å—è.</span>
                        </span>
                    </td>
                    <td><span class="metric-box romi-negative">-67%</span></td>
                    <td>‚ö†Ô∏è –ì–ª—É–±–æ–∫–æ —É–±—ã—Ç–æ—á–µ–Ω</td>
                </tr>

                <!-- AFFILIATES -->
                <tr data-channel="AFFILIATES" data-traffic="content" class="channel-affiliates">
                    <td class="channel-cell">AFFILIATES</td>
                    <td>Content Marketing</td>
                    <td><span class="metric-box cac-medium">$15</span></td>
                    <td>3-5%</td>
                    <td>$60</td>
                    <td><strong>3.5%</strong><br><small>($2.10)</small></td>
                    <td>
                        <span class="term-with-tooltip"><div class="stat-number">$6.30</div>
                            <span class="tooltip-content"><span class="tooltip-formula">$2.10 √ó 3 –ø–æ–∫—É–ø–∫–∏</span>–ú–∞—Ä–∂–∞ 3.5% —Å–ª–∏—à–∫–æ–º –º–∞–ª–∞ –¥–ª—è –æ–∫—É–ø–∞–µ–º–æ—Å—Ç–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞.</span>
                        </span>
                    </td>
                    <td><span class="metric-box romi-negative">-58%</span></td>
                    <td>‚ö†Ô∏è –ù—É–∂–Ω–æ –ø–æ–≤—ã—à–∞—Ç—å –∫–æ–º–∏—Å—Å–∏—é –¥–æ 8-10%</td>
                </tr>
                <tr data-channel="AFFILIATES" data-traffic="paid" class="channel-affiliates">
                    <td class="channel-cell"></td>
                    <td>TikTok Ads</td>
                    <td><span class="metric-box cac-high">$25</span></td>
                    <td>2-4%</td>
                    <td>$45</td>
                    <td><strong>3.5%</strong><br><small>($1.58)</small></td>
                    <td>
                        <span class="term-with-tooltip"><div class="stat-number">$4.73</div>
                            <span class="tooltip-content"><span class="tooltip-formula">$1.58 √ó 3 –ø–æ–∫—É–ø–∫–∏</span>–ö–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∏—á–µ—Å–∫–∏–π —É–±—ã—Ç–æ–∫ –Ω–∞ –ø–ª–∞—Ç–Ω–æ–º —Ç—Ä–∞—Ñ–∏–∫–µ.</span>
                        </span>
                    </td>
                    <td><span class="metric-box romi-negative">-81%</span></td>
                    <td>‚õî –û—Ç–∫–ª—é—á–∏—Ç—å –ø–ª–∞—Ç–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫</td>
                </tr>

                <!-- PARTNERS -->
                <tr data-channel="PARTNERS" data-traffic="social" class="channel-partners">
                    <td class="channel-cell">PARTNERS</td>
                    <td>Instagram Geo</td>
                    <td><span class="metric-box cac-high">$30</span></td>
                    <td>2-3%</td>
                    <td>$150</td>
                    <td><strong>15.0%</strong><br><small>($22.50)</small></td>
                    <td>
                        <span class="term-with-tooltip"><div class="stat-number">$67.50</div>
                            <span class="tooltip-content"><span class="tooltip-formula">$22.50 √ó 3 –ø–æ–∫—É–ø–∫–∏</span>–í—ã—Å–æ–∫–∞—è –º–∞—Ä–∂–∞ –æ–∫—É–ø–∞–µ—Ç –¥–æ—Ä–æ–≥–æ–π —Ç—Ä–∞—Ñ–∏–∫.</span>
                        </span>
                    </td>
                    <td><span class="metric-box romi-excellent">125%</span></td>
                    <td>‚úÖ –°–∞–º—ã–π —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –∫–∞–Ω–∞–ª</td>
                </tr>
                <tr data-channel="PARTNERS" data-traffic="paid" class="channel-partners">
                    <td class="channel-cell"></td>
                    <td>Influencers</td>
                    <td><span class="metric-box cac-high">$50</span></td>
                    <td>1.5-2.5%</td>
                    <td>$180</td>
                    <td><strong>15.0%</strong><br><small>($27.00)</small></td>
                    <td>
                        <span class="term-with-tooltip"><div class="stat-number">$81.00</div>
                            <span class="tooltip-content"><span class="tooltip-formula">$27.00 √ó 3 –ø–æ–∫—É–ø–∫–∏</span>–•–æ—Ä–æ—à–∏–π ROMI –¥–∞–∂–µ –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–º CAC.</span>
                        </span>
                    </td>
                    <td><span class="metric-box romi-good">62%</span></td>
                    <td>‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –≤ –ø–ª—é—Å</td>
                </tr>

                <!-- SUBSCRIPTIONS -->
                <tr data-channel="SUBS" data-traffic="organic" class="channel-subs">
                    <td class="channel-cell">SUBS</td>
                    <td>In-App Upsell</td>
                    <td><span class="metric-box cac-high">$70</span></td>
                    <td>2-5%</td>
                    <td>$60</td>
                    <td><strong>85.0%</strong><br><small>($51.00)</small></td>
                    <td>
                        <span class="term-with-tooltip"><div class="stat-number">$102.00</div>
                            <span class="tooltip-content"><span class="tooltip-formula">$51.00 √ó 2 –≥–æ–¥–∞</span>–í—ã—Å–æ–∫–∞—è –º–∞—Ä–∂–∞ –ø–æ–¥–ø–∏—Å–∫–∏ (–º–∏–Ω—É—Å —ç–∫–≤–∞–π—Ä–∏–Ω–≥).</span>
                        </span>
                    </td>
                    <td><span class="metric-box romi-good">46%</span></td>
                    <td>‚úÖ –ü—Ä–∏–±—ã–ª—å–Ω—ã–π –∫–∞–Ω–∞–ª</td>
                </tr>
                <tr data-channel="SUBS" data-traffic="paid" class="channel-subs">
                    <td class="channel-cell"></td>
                    <td>Email Return</td>
                    <td><span class="metric-box cac-high">$120</span></td>
                    <td>1-2%</td>
                    <td>$60</td>
                    <td><strong>85.0%</strong><br><small>($51.00)</small></td>
                    <td>
                        <span class="term-with-tooltip"><div class="stat-number">$76.50</div>
                            <span class="tooltip-content"><span class="tooltip-formula">$51.00 √ó 1.5 –≥–æ–¥–∞</span>–í–æ–∑–≤—Ä–∞—Ç —é–∑–µ—Ä–æ–≤ –æ–±—Ö–æ–¥–∏—Ç—Å—è —Å–ª–∏—à–∫–æ–º –¥–æ—Ä–æ–≥–æ.</span>
                        </span>
                    </td>
                    <td><span class="metric-box romi-negative">-36%</span></td>
                    <td>‚ö†Ô∏è –£–±—ã—Ç–æ—á–Ω–æ</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="summary">
        <div class="summary-card">
            <h3>‚ö†Ô∏è –í–∞–∂–Ω—ã–π –∏–Ω—Å–∞–π—Ç</h3>
            <p>–ü–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∏–µ –∫–∞–Ω–∞–ª—ã (Amazon, Affiliates) <strong>—É–±—ã—Ç–æ—á–Ω—ã</strong> –∏–∑-–∑–∞ –Ω–∏–∑–∫–æ–π –∫–æ–º–∏—Å—Å–∏–∏ (2-3.5%) –∏ –Ω–∏–∑–∫–æ–≥–æ LTV. –ò—Ö –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –∫–∞–∫ –≤–∏—Ç—Ä–∏–Ω—É –¥–ª—è —É–¥–µ—Ä–∂–∞–Ω–∏—è, –Ω–æ –Ω–µ –ª–∏—Ç—å –Ω–∞ –Ω–∏—Ö –ø–ª–∞—Ç–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫.</p>
        </div>
        <div class="summary-card">
            <h3>‚úÖ –¢–æ—á–∫–∏ —Ä–æ—Å—Ç–∞</h3>
            <p>1. <strong>Partners (15%)</strong>: –û—Å–Ω–æ–≤–Ω–æ–π –¥—Ä–∞–π–≤–µ—Ä –ø—Ä–∏–±—ã–ª–∏.<br>
            2. <strong>Donations (7%)</strong>: –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ –æ—Ä–≥–∞–Ω–∏–∫–µ.<br>
            3. <strong>Subs (85%)</strong>: –í—ã—Å–æ–∫–∞—è –º–∞—Ä–∂–∞, –Ω–æ –¥–æ—Ä–æ–≥–æ–µ –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏–µ.</p>
        </div>
    </div>
</div>

<script>
function filterTable() {
    const channelFilter = document.getElementById('channelFilter').value;
    const trafficFilter = document.getElementById('trafficFilter').value;
    const rows = document.querySelectorAll('#mainTable tbody tr');

    rows.forEach(row => {
        const channel = row.getAttribute('data-channel');
        const traffic = row.getAttribute('data-traffic');

        let showRow = true;
        if (channelFilter !== 'all' && channel !== channelFilter) showRow = false;
        if (trafficFilter !== 'all' && traffic !== trafficFilter) showRow = false;

        row.style.display = showRow ? '' : 'none';
    });
}
</script>

</body>
</html>